!function(){function e(e){t=this,t.options=e,t.camera=document.createElement(e.camera&&e.camera.tag||"video"),t.store=document.createElement(e.store&&e.store.tag||"canvas"),t.photo=document.createElement("img"),t.download=document.createElement("a"),t.download.setAttribute("download","selfie.png"),t.download.insertAdjacentHTML("beforeend","DOWNLOAD"),t.setup()}var t,o=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;e.prototype.isNode=function(e){return e&&e.nodeType?e:null},e.prototype.activeNode=function(e,o,a){var r=t.options[o],n=r&&r.class?r.class:"";n+=a?n&&r.activeClass?" "+r.activeClass:" __selfie-active":n&&r.unactiveClass?" "+r.unactiveClass:" __selfie-unactive",e.setAttribute("class",n)},e.prototype.setup=function(){var e=t.options,a=t.isNode(e.target)||document.body;if(a.appendChild(t.camera),a.appendChild(t.store),a.appendChild(t.photo),a.appendChild(t.download),!o)throw new Error("This browser is not support user media.");o.call(navigator,{video:!0},function(e){window.URL?t.camera.src=window.URL.createObjectURL(e):t.camera.src=e,t.camera.onplay=function(){t.display()},t.camera.play()},function(e){throw e})},e.prototype.display=function(){t.activeNode(t.camera,"camera",!0),t.activeNode(t.store,"store",!1),t.activeNode(t.photo,"photo",!1),t.activeNode(t.download,"download",!1),t.updateUI()},e.prototype.updateUI=function(){var e=document.querySelectorAll(".__selfie-active"),t=document.querySelectorAll(".__selfie-unactive");Array.prototype.forEach.call(e,function(e){e.setAttribute("style","display: none;"),e.setAttribute("style",e.getAttribute("style").replace(/display\s?\:\s*none\;/gi,""))}),Array.prototype.forEach.call(t,function(e){e.setAttribute("style","display: none;")})},e.prototype.takePhoto=function(){var e=t.store.getContext("2d"),o=t.camera.videoWidth,a=t.camera.videoHeight,r="";return!(!o||!a)&&(t.store.width=o,t.store.height=a,e.drawImage(t.camera,0,0,o,a),r=t.store.toDataURL("image/png"),t.photo.setAttribute("src",r),t.download.setAttribute("href",r),t.activeNode(t.photo,"photo",!0),t.activeNode(t.download,"download",!0),t.updateUI(),!0)},e.prototype.removePhoto=function(){return t.photo.setAttribute("src",""),t.download.setAttribute("href",""),t.activeNode(t.photo,"photo",!1),t.activeNode(t.download,"download",!1),t.updateUI(),!0}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbGZpZS5taW4uanMiXSwibmFtZXMiOlsiU2VsZmllIiwib3B0aW9ucyIsIl9zZWxmaWUiLCJ0aGlzIiwiY2FtZXJhIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGFnIiwic3RvcmUiLCJwaG90byIsImRvd25sb2FkIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwic2V0dXAiLCJnZXRVc2VyTWVkaWEiLCJuYXZpZ2F0b3IiLCJ3ZWJraXRHZXRVc2VyTWVkaWEiLCJtb3pHZXRVc2VyTWVkaWEiLCJtc0dldFVzZXJNZWRpYSIsInByb3RvdHlwZSIsImlzTm9kZSIsIm5vZGUiLCJub2RlVHlwZSIsImFjdGl2ZU5vZGUiLCJjb21wb25lbnROYW1lIiwiYWN0aXZlIiwiY29tcG9uZW50IiwiY2xhc3NOYW1lIiwiY2xhc3MiLCJhY3RpdmVDbGFzcyIsInVuYWN0aXZlQ2xhc3MiLCJ0YXJnZXQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJFcnJvciIsImNhbGwiLCJ2aWRlbyIsInN0cmVhbSIsIndpbmRvdyIsIlVSTCIsInNyYyIsImNyZWF0ZU9iamVjdFVSTCIsIm9ucGxheSIsImRpc3BsYXkiLCJwbGF5IiwiZXJyIiwidXBkYXRlVUkiLCJhY3RpdmVOb2RlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ1bmFjdGl2ZU5vZGVzIiwiQXJyYXkiLCJmb3JFYWNoIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsInRha2VQaG90byIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsInZpZGVvV2lkdGgiLCJoZWlnaHQiLCJ2aWRlb0hlaWdodCIsInNuYXAiLCJkcmF3SW1hZ2UiLCJ0b0RhdGFVUkwiLCJyZW1vdmVQaG90byJdLCJtYXBwaW5ncyI6IkNBQUMsV0FhQyxRQUFTQSxHQUFPQyxHQUNkQyxFQUFVQyxLQUVWRCxFQUFRRCxRQUFVQSxFQUNsQkMsRUFBUUUsT0FBU0MsU0FBU0MsY0FBZUwsRUFBUUcsUUFBVUgsRUFBUUcsT0FBT0csS0FBUSxTQUNsRkwsRUFBUU0sTUFBUUgsU0FBU0MsY0FBZUwsRUFBUU8sT0FBU1AsRUFBUU8sTUFBTUQsS0FBUSxVQUMvRUwsRUFBUU8sTUFBUUosU0FBU0MsY0FBYyxPQUN2Q0osRUFBUVEsU0FBV0wsU0FBU0MsY0FBYyxLQUUxQ0osRUFBUVEsU0FBU0MsYUFBYSxXQUFZLGNBQzFDVCxFQUFRUSxTQUFTRSxtQkFBbUIsWUFBYSxZQUVqRFYsRUFBUVcsUUF4QlYsR0FFSVgsR0FGQVksRUFBZUMsVUFBVUQsY0FBZ0JDLFVBQVVDLG9CQUFzQkQsVUFBVUUsaUJBQW1CRixVQUFVRyxjQTJCcEhsQixHQUFPbUIsVUFBVUMsT0FBUyxTQUFVQyxHQUNsQyxNQUFJQSxJQUFRQSxFQUFLQyxTQUNSRCxFQUVBLE1BSVhyQixFQUFPbUIsVUFBVUksV0FBYSxTQUFVRixFQUFNRyxFQUFlQyxHQUMzRCxHQUFJQyxHQUFZeEIsRUFBUUQsUUFBUXVCLEdBQzVCRyxFQUFZRCxHQUFhQSxFQUFVRSxNQUFRRixFQUFVRSxNQUFRLEVBRy9ERCxJQURFRixFQUNZRSxHQUFhRCxFQUFVRyxZQUFlLElBQU1ILEVBQVVHLFlBQWUsbUJBRXJFRixHQUFhRCxFQUFVSSxjQUFpQixJQUFNSixFQUFVSSxjQUFpQixxQkFHekZULEVBQUtWLGFBQWEsUUFBU2dCLElBRzdCM0IsRUFBT21CLFVBQVVOLE1BQVEsV0FDdkIsR0FBSVosR0FBVUMsRUFBUUQsUUFDbEI4QixFQUFTN0IsRUFBUWtCLE9BQU9uQixFQUFROEIsU0FBVzFCLFNBQVMyQixJQU94RCxJQUxBRCxFQUFPRSxZQUFZL0IsRUFBUUUsUUFDM0IyQixFQUFPRSxZQUFZL0IsRUFBUU0sT0FDM0J1QixFQUFPRSxZQUFZL0IsRUFBUU8sT0FDM0JzQixFQUFPRSxZQUFZL0IsRUFBUVEsV0FFdEJJLEVBQ0gsS0FBTSxJQUFJb0IsT0FBTSwwQ0FFaEJwQixHQUFhcUIsS0FBS3BCLFdBQ2RxQixPQUFPLEdBRVQsU0FBVUMsR0FDSkMsT0FBT0MsSUFDVHJDLEVBQVFFLE9BQU9vQyxJQUFNRixPQUFPQyxJQUFJRSxnQkFBZ0JKLEdBRWhEbkMsRUFBUUUsT0FBT29DLElBQU1ILEVBR3ZCbkMsRUFBUUUsT0FBT3NDLE9BQVMsV0FDdEJ4QyxFQUFReUMsV0FHVnpDLEVBQVFFLE9BQU93QyxRQUVqQixTQUFVQyxHQUNSLEtBQU1BLE1BTWQ3QyxFQUFPbUIsVUFBVXdCLFFBQVUsV0FDekJ6QyxFQUFRcUIsV0FBV3JCLEVBQVFFLE9BQVEsVUFBVSxHQUM3Q0YsRUFBUXFCLFdBQVdyQixFQUFRTSxNQUFPLFNBQVMsR0FDM0NOLEVBQVFxQixXQUFXckIsRUFBUU8sTUFBTyxTQUFTLEdBQzNDUCxFQUFRcUIsV0FBV3JCLEVBQVFRLFNBQVUsWUFBWSxHQUVqRFIsRUFBUTRDLFlBR1Y5QyxFQUFPbUIsVUFBVTJCLFNBQVcsV0FDMUIsR0FBSUMsR0FBYzFDLFNBQVMyQyxpQkFBaUIsb0JBQ3hDQyxFQUFnQjVDLFNBQVMyQyxpQkFBaUIscUJBRTlDRSxPQUFNL0IsVUFBVWdDLFFBQVFoQixLQUFLWSxFQUFhLFNBQVUxQixHQUNsREEsRUFBS1YsYUFBYSxRQUFTLGtCQUMzQlUsRUFBS1YsYUFBYSxRQUFTVSxFQUFLK0IsYUFBYSxTQUFTQyxRQUFRLDBCQUEyQixPQUczRkgsTUFBTS9CLFVBQVVnQyxRQUFRaEIsS0FBS2MsRUFBZSxTQUFVNUIsR0FDcERBLEVBQUtWLGFBQWEsUUFBUyxxQkFJL0JYLEVBQU9tQixVQUFVbUMsVUFBWSxXQUMzQixHQUFJQyxHQUFNckQsRUFBUU0sTUFBTWdELFdBQVcsTUFDL0JDLEVBQVF2RCxFQUFRRSxPQUFPc0QsV0FDdkJDLEVBQVN6RCxFQUFRRSxPQUFPd0QsWUFDeEJDLEVBQU8sRUFFWCxVQUFJSixJQUFTRSxLQUNYekQsRUFBUU0sTUFBTWlELE1BQVFBLEVBQ3RCdkQsRUFBUU0sTUFBTW1ELE9BQVNBLEVBRXZCSixFQUFJTyxVQUFVNUQsRUFBUUUsT0FBUSxFQUFHLEVBQUdxRCxFQUFPRSxHQUUzQ0UsRUFBTzNELEVBQVFNLE1BQU11RCxVQUFVLGFBRS9CN0QsRUFBUU8sTUFBTUUsYUFBYSxNQUFPa0QsR0FDbEMzRCxFQUFRUSxTQUFTQyxhQUFhLE9BQVFrRCxHQUV0QzNELEVBQVFxQixXQUFXckIsRUFBUU8sTUFBTyxTQUFTLEdBQzNDUCxFQUFRcUIsV0FBV3JCLEVBQVFRLFNBQVUsWUFBWSxHQUVqRFIsRUFBUTRDLFlBRUQsSUFNWDlDLEVBQU9tQixVQUFVNkMsWUFBYyxXQVM3QixNQVJBOUQsR0FBUU8sTUFBTUUsYUFBYSxNQUFPLElBQ2xDVCxFQUFRUSxTQUFTQyxhQUFhLE9BQVEsSUFFdENULEVBQVFxQixXQUFXckIsRUFBUU8sTUFBTyxTQUFTLEdBQzNDUCxFQUFRcUIsV0FBV3JCLEVBQVFRLFNBQVUsWUFBWSxHQUVqRFIsRUFBUTRDLFlBRUQiLCJmaWxlIjoic2VsZmllLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbF0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
