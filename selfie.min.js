!function(){function e(e){t=this,t.options=e,t.camera=document.createElement("video"),t.store=document.createElement("canvas"),t.photo=document.createElement("img"),t.download=document.createElement("a"),e.camera&&e.camera.id&&t.camera.setAttribute("id",e.camera.id),e.store&&e.store.id&&t.store.setAttribute("id",e.store.id),e.photo&&e.photo.id&&t.photo.setAttribute("id",e.photo.id),e.download&&e.download.id&&t.download.setAttribute("id",e.download.id),t.download.setAttribute("download",(e.fileName||"selfie")+".png"),t.download.insertAdjacentHTML("beforeend",e.downloadLinkText||"DOWNLOAD"),t.setup()}var t,o=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,a={init:function(o){return o=o||{},t||new e(o)},author:"wonism",version:"1.0.0"};e.prototype.isNode=function(e){return e&&e.nodeType?e:null},e.prototype.activeNode=function(e,o,a){var i=t.options[o],r=i&&i.class?i.class:"";r+=a?r&&i.activeClass?" "+i.activeClass:" __selfie-active":r&&i.unactiveClass?" "+i.unactiveClass:" __selfie-unactive",e.setAttribute("class",r)},e.prototype.setup=function(){var e=t.options,a=t.isNode(e.target)||document.body;if(a.appendChild(t.camera),a.appendChild(t.store),a.appendChild(t.photo),a.appendChild(t.download),!o)throw new Error("This browser is not support user media.");o.call(navigator,{video:!0},function(e){window.URL?t.camera.src=window.URL.createObjectURL(e):t.camera.src=e,t.camera.onplay=function(){t.display()},t.camera.play()},function(e){throw e})},e.prototype.display=function(){t.activeNode(t.camera,"camera",!0),t.activeNode(t.store,"store",!1),t.activeNode(t.photo,"photo",!1),t.activeNode(t.download,"download",!1),t.updateUI()},e.prototype.updateUI=function(){var e=document.querySelectorAll(".__selfie-active"),t=document.querySelectorAll(".__selfie-unactive");Array.prototype.forEach.call(e,function(e){e.setAttribute("style","display: none;"),e.setAttribute("style",e.getAttribute("style").replace(/display\s?\:\s*none\;/gi,""))}),Array.prototype.forEach.call(t,function(e){e.setAttribute("style","display: none;")})},e.prototype.takePhoto=function(){var e=t.store.getContext("2d"),o=t.camera.videoWidth,a=t.camera.videoHeight,i="";return!(!o||!a)&&(t.store.width=o,t.store.height=a,e.drawImage(t.camera,0,0,o,a),i=t.store.toDataURL("image/png"),t.photo.setAttribute("src",i),t.download.setAttribute("href",i),t.activeNode(t.photo,"photo",!0),t.activeNode(t.download,"download",!0),t.updateUI(),!0)},e.prototype.removePhoto=function(){return t.photo.setAttribute("src",""),t.download.setAttribute("href",""),t.activeNode(t.photo,"photo",!1),t.activeNode(t.download,"download",!1),t.updateUI(),!0},window.selfie=a}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbGZpZS5qcyJdLCJuYW1lcyI6WyJTZWxmaWUiLCJvcHRpb25zIiwiX3NlbGZpZSIsInRoaXMiLCJjYW1lcmEiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdG9yZSIsInBob3RvIiwiZG93bmxvYWQiLCJpZCIsInNldEF0dHJpYnV0ZSIsImZpbGVOYW1lIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZG93bmxvYWRMaW5rVGV4dCIsInNldHVwIiwiZ2V0VXNlck1lZGlhIiwibmF2aWdhdG9yIiwid2Via2l0R2V0VXNlck1lZGlhIiwibW96R2V0VXNlck1lZGlhIiwibXNHZXRVc2VyTWVkaWEiLCJzZWxmaWUiLCJpbml0IiwiYXV0aG9yIiwidmVyc2lvbiIsInByb3RvdHlwZSIsImlzTm9kZSIsIm5vZGUiLCJub2RlVHlwZSIsImFjdGl2ZU5vZGUiLCJjb21wb25lbnROYW1lIiwiYWN0aXZlIiwiY29tcG9uZW50IiwiY2xhc3NOYW1lIiwiY2xhc3MiLCJhY3RpdmVDbGFzcyIsInVuYWN0aXZlQ2xhc3MiLCJ0YXJnZXQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJFcnJvciIsImNhbGwiLCJ2aWRlbyIsInN0cmVhbSIsIndpbmRvdyIsIlVSTCIsInNyYyIsImNyZWF0ZU9iamVjdFVSTCIsIm9ucGxheSIsImRpc3BsYXkiLCJwbGF5IiwiZXJyIiwidXBkYXRlVUkiLCJhY3RpdmVOb2RlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ1bmFjdGl2ZU5vZGVzIiwiQXJyYXkiLCJmb3JFYWNoIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsInRha2VQaG90byIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsInZpZGVvV2lkdGgiLCJoZWlnaHQiLCJ2aWRlb0hlaWdodCIsInNuYXAiLCJkcmF3SW1hZ2UiLCJ0b0RhdGFVUkwiLCJyZW1vdmVQaG90byJdLCJtYXBwaW5ncyI6IkNBZUMsV0FjQyxRQUFTQSxHQUFPQyxHQUNkQyxFQUFVQyxLQUVWRCxFQUFRRCxRQUFV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aEIsYUFBYSxRQUFTZ0IsRUFBSytCLGFBQWEsU0FBU0MsUUFBUSwwQkFBMkIsT0FHM0ZILE1BQU0vQixVQUFVZ0MsUUFBUWhCLEtBQUtjLEVBQWUsU0FBVTVCLEdBQ3BEQSxFQUFLaEIsYUFBYSxRQUFTLHFCQUkvQlgsRUFBT3lCLFVBQVVtQyxVQUFZLFdBQzNCLEdBQUlDLEdBQU0zRCxFQUFRSyxNQUFNdUQsV0FBVyxNQUMvQkMsRUFBUTdELEVBQVFFLE9BQU80RCxXQUN2QkMsRUFBUy9ELEVBQVFFLE9BQU84RCxZQUN4QkMsRUFBTyxFQUVYLFVBQUlKLElBQVNFLEtBQ1gvRCxFQUFRSyxNQUFNd0QsTUFBUUEsRUFDdEI3RCxFQUFRSyxNQUFNMEQsT0FBU0EsRUFFdkJKLEVBQUlPLFVBQVVsRSxFQUFRRSxPQUFRLEVBQUcsRUFBRzJELEVBQU9FLEdBRTNDRSxFQUFPakUsRUFBUUssTUFBTThELFVBQVUsYUFFL0JuRSxFQUFRTSxNQUFNRyxhQUFhLE1BQU93RCxHQUNsQ2pFLEVBQVFPLFNBQVNFLGFBQWEsT0FBUXdELEdBRXRDakUsRUFBUTJCLFdBQVczQixFQUFRTSxNQUFPLFNBQVMsR0FDM0NOLEVBQVEyQixXQUFXM0IsRUFBUU8sU0FBVSxZQUFZLEdBRWpEUCxFQUFRa0QsWUFFRCxJQU1YcEQsRUFBT3lCLFVBQVU2QyxZQUFjLFdBUzdCLE1BUkFwRSxHQUFRTSxNQUFNRyxhQUFhLE1BQU8sSUFDbENULEVBQVFPLFNBQVNFLGFBQWEsT0FBUSxJQUV0Q1QsRUFBUTJCLFdBQVczQixFQUFRTSxNQUFPLFNBQVMsR0FDM0NOLEVBQVEyQixXQUFXM0IsRUFBUU8sU0FBVSxZQUFZLEdBRWpEUCxFQUFRa0QsWUFFRCxHQUdUUixPQUFPdkIsT0FBU0EiLCJmaWxlIjoic2VsZmllLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIHRpdGxlICAgIDogU2VsZmllLmpzXG4gKlxuICogdmVyc2lvbiAgOiAxLjAuMFxuICpcbiAqIGF1dGhvciAgIDogd29uaXNtXG4gKlxuICogbGljZW5zZSAgOiBNSVRcbiAqXG4gKiBob21lcGFnZSA6IGh0dHBzOi8vamFld29uaXNtLmNmXG4gKlxuICogZ2l0aHViICAgOiBodHRwczovL3d3dy5naXRodWIuY29tL3dvbmlzbVxuICpcbiAqL1xuOyhmdW5jdGlvbiAoKSB7XG4gIHZhciBnZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubXNHZXRVc2VyTWVkaWE7XG5cbiAgdmFyIF9zZWxmaWU7XG4gIHZhciBzZWxmaWUgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICByZXR1cm4gX3NlbGZpZSB8fCBuZXcgU2VsZmllKG9wdGlvbnMpO1xuICAgIH0sXG4gICAgYXV0aG9yOiAnd29uaXNtJyxcbiAgICB2ZXJzaW9uOiAnMS4wLjAnXG4gIH07XG5cbiAgZnVuY3Rpb24gU2VsZmllKG9wdGlvbnMpIHtcbiAgICBfc2VsZmllID0gdGhpcztcblxuICAgIF9zZWxmaWUub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgX3NlbGZpZS5jYW1lcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIF9zZWxmaWUuc3RvcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBfc2VsZmllLnBob3RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgX3NlbGZpZS5kb3dubG9hZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuICAgIG9wdGlvbnMuY2FtZXJhICYmIG9wdGlvbnMuY2FtZXJhLmlkICYmIF9zZWxmaWUuY2FtZXJhLnNldEF0dHJpYnV0ZSgnaWQnLCBvcHRpb25zLmNhbWVyYS5pZCk7XG4gICAgb3B0aW9ucy5zdG9yZSAmJiBvcHRpb25zLnN0b3JlLmlkICYmIF9zZWxmaWUuc3RvcmUuc2V0QXR0cmlidXRlKCdpZCcsIG9wdGlvbnMuc3RvcmUuaWQpO1xuICAgIG9wdGlvbnMucGhvdG8gJiYgb3B0aW9ucy5waG90by5pZCAmJiBfc2VsZmllLnBob3RvLnNldEF0dHJpYnV0ZSgnaWQnLCBvcHRpb25zLnBob3RvLmlkKTtcbiAgICBvcHRpb25zLmRvd25sb2FkICYmIG9wdGlvbnMuZG93bmxvYWQuaWQgJiYgX3NlbGZpZS5kb3dubG9hZC5zZXRBdHRyaWJ1dGUoJ2lkJywgb3B0aW9ucy5kb3dubG9hZC5pZCk7XG5cbiAgICBfc2VsZmllLmRvd25sb2FkLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAob3B0aW9ucy5maWxlTmFtZSB8fCAnc2VsZmllJykgKyAnLnBuZycpO1xuICAgIF9zZWxmaWUuZG93bmxvYWQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBvcHRpb25zLmRvd25sb2FkTGlua1RleHQgfHwgJ0RPV05MT0FEJyk7XG5cbiAgICBfc2VsZmllLnNldHVwKCk7XG4gIH1cblxuICBTZWxmaWUucHJvdG90eXBlLmlzTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBTZWxmaWUucHJvdG90eXBlLmFjdGl2ZU5vZGUgPSBmdW5jdGlvbiAobm9kZSwgY29tcG9uZW50TmFtZSwgYWN0aXZlKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IF9zZWxmaWUub3B0aW9uc1tjb21wb25lbnROYW1lXSxcbiAgICAgICAgY2xhc3NOYW1lID0gY29tcG9uZW50ICYmIGNvbXBvbmVudC5jbGFzcyA/IGNvbXBvbmVudC5jbGFzcyA6ICcnO1xuXG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgY2xhc3NOYW1lICs9IChjbGFzc05hbWUgJiYgY29tcG9uZW50LmFjdGl2ZUNsYXNzID8gKCcgJyArIGNvbXBvbmVudC5hY3RpdmVDbGFzcykgOiAnIF9fc2VsZmllLWFjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGFzc05hbWUgKz0gKGNsYXNzTmFtZSAmJiBjb21wb25lbnQudW5hY3RpdmVDbGFzcyA/ICgnICcgKyBjb21wb25lbnQudW5hY3RpdmVDbGFzcykgOiAnIF9fc2VsZmllLXVuYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcbiAgfTtcblxuICBTZWxmaWUucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gX3NlbGZpZS5vcHRpb25zO1xuICAgIHZhciB0YXJnZXQgPSBfc2VsZmllLmlzTm9kZShvcHRpb25zLnRhcmdldCkgfHwgZG9jdW1lbnQuYm9keTtcblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChfc2VsZmllLmNhbWVyYSk7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKF9zZWxmaWUuc3RvcmUpO1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChfc2VsZmllLnBob3RvKTtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoX3NlbGZpZS5kb3dubG9hZCk7XG5cbiAgICBpZiAoIWdldFVzZXJNZWRpYSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnQgdXNlciBtZWRpYS4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2V0VXNlck1lZGlhLmNhbGwobmF2aWdhdG9yLCB7XG4gICAgICAgICAgdmlkZW86IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHN0cmVhbSkge1xuICAgICAgICAgIGlmICh3aW5kb3cuVVJMKSB7XG4gICAgICAgICAgICBfc2VsZmllLmNhbWVyYS5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfc2VsZmllLmNhbWVyYS5zcmMgPSBzdHJlYW07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3NlbGZpZS5jYW1lcmEub25wbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3NlbGZpZS5kaXNwbGF5KCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIF9zZWxmaWUuY2FtZXJhLnBsYXkoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgU2VsZmllLnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgIF9zZWxmaWUuYWN0aXZlTm9kZShfc2VsZmllLmNhbWVyYSwgJ2NhbWVyYScsIHRydWUpO1xuICAgIF9zZWxmaWUuYWN0aXZlTm9kZShfc2VsZmllLnN0b3JlLCAnc3RvcmUnLCBmYWxzZSk7XG4gICAgX3NlbGZpZS5hY3RpdmVOb2RlKF9zZWxmaWUucGhvdG8sICdwaG90bycsIGZhbHNlKTtcbiAgICBfc2VsZmllLmFjdGl2ZU5vZGUoX3NlbGZpZS5kb3dubG9hZCwgJ2Rvd25sb2FkJywgZmFsc2UpO1xuXG4gICAgX3NlbGZpZS51cGRhdGVVSSgpO1xuICB9O1xuXG4gIFNlbGZpZS5wcm90b3R5cGUudXBkYXRlVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGl2ZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLl9fc2VsZmllLWFjdGl2ZScpLFxuICAgICAgICB1bmFjdGl2ZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLl9fc2VsZmllLXVuYWN0aXZlJyk7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGFjdGl2ZU5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBub2RlLmdldEF0dHJpYnV0ZSgnc3R5bGUnKS5yZXBsYWNlKC9kaXNwbGF5XFxzP1xcOlxccypub25lXFw7L2dpLCAnJykpO1xuICAgIH0pO1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh1bmFjdGl2ZU5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG4gICAgfSk7XG4gIH07XG5cbiAgU2VsZmllLnByb3RvdHlwZS50YWtlUGhvdG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGN0eCA9IF9zZWxmaWUuc3RvcmUuZ2V0Q29udGV4dCgnMmQnKSxcbiAgICAgICAgd2lkdGggPSBfc2VsZmllLmNhbWVyYS52aWRlb1dpZHRoLFxuICAgICAgICBoZWlnaHQgPSBfc2VsZmllLmNhbWVyYS52aWRlb0hlaWdodCxcbiAgICAgICAgc25hcCA9ICcnO1xuXG4gICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgX3NlbGZpZS5zdG9yZS53aWR0aCA9IHdpZHRoO1xuICAgICAgX3NlbGZpZS5zdG9yZS5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIGN0eC5kcmF3SW1hZ2UoX3NlbGZpZS5jYW1lcmEsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICBzbmFwID0gX3NlbGZpZS5zdG9yZS50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuXG4gICAgICBfc2VsZmllLnBob3RvLnNldEF0dHJpYnV0ZSgnc3JjJywgc25hcCk7XG4gICAgICBfc2VsZmllLmRvd25sb2FkLnNldEF0dHJpYnV0ZSgnaHJlZicsIHNuYXApO1xuXG4gICAgICBfc2VsZmllLmFjdGl2ZU5vZGUoX3NlbGZpZS5waG90bywgJ3Bob3RvJywgdHJ1ZSk7XG4gICAgICBfc2VsZmllLmFjdGl2ZU5vZGUoX3NlbGZpZS5kb3dubG9hZCwgJ2Rvd25sb2FkJywgdHJ1ZSk7XG5cbiAgICAgIF9zZWxmaWUudXBkYXRlVUkoKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgU2VsZmllLnByb3RvdHlwZS5yZW1vdmVQaG90byA9IGZ1bmN0aW9uICgpIHtcbiAgICBfc2VsZmllLnBob3RvLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuICAgIF9zZWxmaWUuZG93bmxvYWQuc2V0QXR0cmlidXRlKCdocmVmJywgJycpO1xuXG4gICAgX3NlbGZpZS5hY3RpdmVOb2RlKF9zZWxmaWUucGhvdG8sICdwaG90bycsIGZhbHNlKTtcbiAgICBfc2VsZmllLmFjdGl2ZU5vZGUoX3NlbGZpZS5kb3dubG9hZCwgJ2Rvd25sb2FkJywgZmFsc2UpO1xuXG4gICAgX3NlbGZpZS51cGRhdGVVSSgpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgd2luZG93LnNlbGZpZSA9IHNlbGZpZTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
